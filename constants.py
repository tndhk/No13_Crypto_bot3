# -*- coding: utf-8 -*-
"""
定数定義モジュール

アプリケーション全体で使用する定数を一元管理します。
"""

# =============================================================================
# テクニカル指標のデフォルト期間
# =============================================================================

# 移動平均
DEFAULT_SHORT_WINDOW = 3
DEFAULT_LONG_WINDOW = 16

# RSI
RSI_PERIOD = 14
RSI_OVERSOLD = 30
RSI_OVERBOUGHT = 70

# ボリンジャーバンド
BB_PERIOD = 20
BB_STD_MULTIPLIER = 2.0

# MACD
MACD_FAST = 12
MACD_SLOW = 26
MACD_SIGNAL = 9

# ATR
ATR_PERIOD = 14

# ブレイクアウト
BREAKOUT_LOOKBACK = 14

# ADX
ADX_PERIOD = 14
ADX_TREND_THRESHOLD = 25
ADX_STRONG_TREND_THRESHOLD = 35

# =============================================================================
# デフォルト取引設定
# =============================================================================

# 手数料
DEFAULT_MAKER_FEE = 0.0010  # 0.1%
DEFAULT_TAKER_FEE = 0.0010  # 0.1%

# スリッページ
DEFAULT_SLIPPAGE_MEAN = 0.0005  # 0.05%
DEFAULT_SLIPPAGE_STD = 0.0003   # 0.03%

# リスク管理
DEFAULT_STOP_LOSS_PERCENT = 1.5
DEFAULT_TAKE_PROFIT_PERCENT = 8.0
DEFAULT_RISK_PER_TRADE = 0.01  # 資本の1%

# バックテスト
DEFAULT_INITIAL_BALANCE = 10000  # USDT
DEFAULT_EXECUTION_DELAY = 1  # キャンドル数
PRICE_SIMULATION_STEPS = 100

# =============================================================================
# Mean Reversion戦略デフォルト値
# =============================================================================

MR_RSI_UPPER = 65
MR_RSI_LOWER = 35
MR_RSI_EXTREME_UPPER = 75
MR_RSI_EXTREME_LOWER = 25
MR_BB_UPPER_FACTOR = 1.003
MR_BB_LOWER_FACTOR = 0.997
MR_Z_SCORE_THRESHOLD = 1.5
MR_MA_DEVIATION = 0.015
MR_PRICE_BOUNCE = 0.002
MR_VOL_HIGH_THRESHOLD = 0.018
MR_VOL_LOW_THRESHOLD = 0.004
MR_LOOKBACK_PERIOD = 20

# =============================================================================
# 戦略統合デフォルト値
# =============================================================================

STRATEGY_BUY_THRESHOLD = 0.25
STRATEGY_SELL_THRESHOLD = -0.25

# =============================================================================
# API制限
# =============================================================================

BINANCE_MAX_REQUESTS_PER_MINUTE = 1200
BINANCE_MAX_KLINES_PER_REQUEST = 1000
API_RETRY_COUNT = 3
API_RETRY_BASE_DELAY = 2  # 秒

# =============================================================================
# ファイルパス
# =============================================================================

DATA_DIR = "data"
LOGS_DIR = "logs"
RESULTS_DIR = "results"
CACHE_DIR = "cache"
MODELS_DIR = "models"

# =============================================================================
# 有効なインターバル
# =============================================================================

VALID_INTERVALS = [
    '1m', '3m', '5m', '15m', '30m',
    '1h', '2h', '4h', '6h', '8h', '12h',
    '1d', '3d', '1w', '1M'
]

# =============================================================================
# シグナル値
# =============================================================================

SIGNAL_BUY = 1
SIGNAL_SELL = -1
SIGNAL_NEUTRAL = 0

# =============================================================================
# リスク管理
# =============================================================================

MAX_CONSECUTIVE_LOSSES = 3
MAX_DRAWDOWN_LIMIT = 5.0  # %
MIN_RISK_REWARD_RATIO = 1.5

# =============================================================================
# パフォーマンス指標
# =============================================================================

SHARPE_RATIO_ANNUALIZATION = 252  # 取引日数
